<h1 align="center">
  Data Management Conceptual Questions
</h1>

## Q1. How to implement distributed operations when each service has its own database
Distributed operations can be implemented in following ways when each service has its own database
- SAGA
- API composition
- CQRS

## Q2. Explain Saga Pattern
- Saga is used to implement transactions that span services
- A saga is a sequence of local transactions.
- Each local transaction updates the database and publishes a message or event to trigger the next local transaction in the saga.

<img src="https://github.com/badalsde/Spring-Interview-Questions/tree/main/Images/ms1.png" alt="Collection Hierarchy" width="900" />

- If a local transaction fails because it violates a business rule then the saga executes a series of compensating transactions that undo the changes that were made by the preceding local transactions.

Below is an example to understand the flow.

- Imagine that you are building an e-commerce store where customers have a credit limit. The application must ensure that a new order will not exceed the customer’s credit limit. Since Orders and Customers are in different databases owned by different services the application cannot simply use a local ACID transaction.

Saga can be implemented in 2 ways:

**Choreography-based saga:**

An e-commerce application that uses this approach would create an order using a choreography-based saga that consists of the following steps:

- The Order Service receives the POST /orders request and creates an Order in a PENDING state
- It then emits an Order Created event
- The Customer Service’s event handler attempts to reserve credit
- It then emits an event indicating the outcome
- The OrderService’s event handler either approves or rejects the Order
  
 
<img src="https://github.com/badalsde/Spring-Interview-Questions/tree/main/Images/ms2.png" alt="Collection Hierarchy" width="900" />

 
**Orchestration-based saga:**

An e-commerce application that uses this approach would create an order using an orchestration-based saga that consists of the following steps:

- The Order Service receives the POST /orders request and creates the Create Order saga orchestrator
- The saga orchestrator creates an Order in the PENDING state
- It then sends a Reserve Credit command to the Customer Service
- The Customer Service attempts to reserve credit
- It then sends back a reply message indicating the outcome
- The saga orchestrator either approves or rejects the Order
 

<img src="https://github.com/badalsde/Spring-Interview-Questions/tree/main/Images/ms3.png" alt="Collection Hierarchy" width="900" />
 
